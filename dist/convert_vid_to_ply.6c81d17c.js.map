{"version":3,"sources":["convert_vid_to_ply.js"],"names":["document","getElementById","addEventListener","e","file","target","files","url","URL","createObjectURL","src","video","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","z","renderer","WebGLRenderer","setSize","appendChild","domElement","draw","paused","ended","canvas","createElement","context","getContext","width","videoWidth","height","videoHeight","drawImage","frame","getImageData","geometry","BufferGeometry","vertices","colors","y","x","push","currentTime","color","Color","data","r","g","b","setAttribute","Float32BufferAttribute","material","PointsMaterial","vertexColors","mesh","Points","add","render","requestAnimationFrame"],"mappings":"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","file":"convert_vid_to_ply.6c81d17c.js","sourceRoot":"..","sourcesContent":["document.getElementById('videoInput').addEventListener('change', function(e) {\r\n    let file = e.target.files[0];\r\n    let url = URL.createObjectURL(file);\r\n    document.getElementById('video').src = url;\r\n});\r\n\r\nlet video = document.getElementById('video');\r\n\r\nvideo.addEventListener('play', function() {\r\n    let scene = new THREE.Scene();\r\n    let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n    camera.position.z = 1000; // Adjust camera position\r\n    let renderer = new THREE.WebGLRenderer();\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    document.getElementById('canvas-container').appendChild(renderer.domElement);\r\n\r\n    function draw() {\r\n        if(video.paused || video.ended) return false;\r\n\r\n        let canvas = document.createElement('canvas');\r\n        let context = canvas.getContext('2d');\r\n        canvas.width = video.videoWidth; // Adjust canvas size to match video\r\n        canvas.height = video.videoHeight;\r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        let frame = context.getImageData(0, 0, canvas.width, canvas.height);\r\n        \r\n        // Create a BufferGeometry\r\n        let geometry = new THREE.BufferGeometry();\r\n        let vertices = [];\r\n        let colors = [];\r\n        for(let y = 0; y < canvas.height; y++) {\r\n            for(let x = 0; x < canvas.width; x++) {\r\n                // Add vertex\r\n                vertices.push(x, y, -video.currentTime);\r\n                // Add color\r\n                let color = new THREE.Color(frame.data[(x + y * canvas.width) * 4] / 255, \r\n                                            frame.data[(x + y * canvas.width) * 4 + 1] / 255, \r\n                                            frame.data[(x + y * canvas.width) * 4 + 2] / 255);\r\n                colors.push(color.r, color.g, color.b);\r\n            }\r\n        }\r\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\r\n        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));\r\n\r\n        let material = new THREE.PointsMaterial({vertexColors: true});\r\n        let mesh = new THREE.Points(geometry, material);\r\n        scene.add(mesh);\r\n\r\n        renderer.render(scene, camera);\r\n        requestAnimationFrame(draw);\r\n    }\r\n\r\n    draw();\r\n});\r\n"]}